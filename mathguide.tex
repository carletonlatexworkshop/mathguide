\documentclass{article}
\usepackage{cctexexample}

\title{Math typesetting guide}
\author{Carleton College \LaTeX{} workshop}
\date{}

\newcommand*{\code}[1]{\texttt{#1}}
\newcommand*{\filename}[1]{\texttt{#1}}
\newcommand*{\inst}[1]{\textbf{#1}}

\begin{document}
\maketitle

One of \LaTeX{}'s most important and widely-known features is its exceptional math typesetting.
Once you have the hang of it, you can easily typeset complex equations:
\begin{subequations}
  \label{eq:gcidef}
  \begin{align}
    Z_{\mathcal{F}}^{\Gamma} (\gamma) &= \sum_{\substack{n \geq 0 \\ \sigma \in \mathfrak{S}_{n}}} \frac{1}{n!} \left\lvert \operatorname{fix} \mathcal{F} [\sigma \cdot \gamma] \right\rvert p_{1}^{\sigma_{1}} p_{2}^{\sigma_{@}} \dots p_{n}^{\sigma_{n}} \label{eq:gcidefperm} \\
    &= \sum_{\substack{n \geq 0 \\ \lambda \vdash n}} \frac{\left\lvert \operatorname{fix} \mathcal{F} [\sigma(\lambda) \cdot \gamma] \right\rvert}{z_{\lambda}} p_{1}^{\lambda_{1}} p_{2}^{\lambda_{2}} \dots p_{n}^{\lambda_{n}}. \label{eq:gcidefpart}
  \end{align}
\end{subequations}
You can also include mathematics within the flow of your sentences; for example, we might let $x = \sqrt{17 - \alpha^{2}}$.
But how is all this done?

\section{Preliminaries}
This guide will be most useful to you if you work along in your own \LaTeX{} document.
\inst{Download one of the Carleton templates and make sure that you are able to compile with it before you continue.}
(If you haven't already worked through the \enquote{Getting started with \LaTeX{}} guide, do that first!)

Now that you have a document ready to go, let's typeset some math.
First, we should note that \LaTeX{} has two different basic ways to handle mathematical expressions:
\begin{description}
\item[Display math]
  is broken out on its own line (as in \cref{eq:gcidefperm,eq:gcidefpart}).
  It is generally set large and with ample space.

\item[Inline math]
  occurs within a line, as when we set $x = \sqrt{17 - \alpha^{2}}$ above.
  It is set fairly small and with tight spacing to fit within a line.
\end{description}

Any mathematical expression can be used either inline or display, but in practice it's best to use inline math for short, simple expressions that fit syntactically and logically into the flow of a sentence and to use display math for larger, more complex expressions that stand alone.

\section{How to enter math mode}
To write an inline math expression, you'll type your math code within a pair of \code{\$} symbols, known as \enquote{math delimiters}.
Try it yourself!
\inst{Update your document to indicate that $1 + 1 = 2$ by adding the following:}
\begin{verbatim}
Everyone knows that $1 + 1 = 2$.
\end{verbatim}
The result should look like this:
\begin{quote}
  Everyone knows that $1 + 1 = 2$.
\end{quote}

Note that the \enquote{.} is \emph{outside} the math delimiters but that the whole mathematical expression is inside them.
This is the standard practice, because the whole expression \enquote{$1 + 1 = 2$} represents a single mathematical statement but the \enquote{.} is punctuation which is part of the \emph{sentence}, not the math.

There are a lot of different ways to get into display mode, but the simplest is to use the \code{equation} or \code{equation*}\footnote{In lieu of \code{\textbackslash{}begin\{equation*\}} and \code{\textbackslash{}end\{equation\}}, you can use the shorthand \code{\textbackslash{}[} and \code{\textbackslash{}]}.} environment.
(The unstarred version \code{equation} gives your equation a number, as was done for \cref{eq:gcidefperm,eq:gcidefpart} above, while the starred version \code{equation*} leaves it un-numbered.)
Try it yourself!
\inst{Update your document with a display-mode equation by adding the following:}
\begin{verbatim}
\begin{equation*}
(1 + x)^{n} = \sum_{k = 0}^{n} \binom{n}{k} x^{k}
\end{equation*}
\end{verbatim}
The result should look like this:
\begin{equation*}
(1 + x)^{n} = \sum_{k = 0}^{n} \binom{n}{k} x^{k}
\end{equation*}

\inst{Now try removing the \code{*} symbols from \emph{both} occurences of \code{equation*} and recompiling.}
The equation should now be numbered.

\section{Writing mathematical expressions}
Now that you know how to put \LaTeX{} into math mode, you need to know how to type the math.
As you've already seen, many symbols on your keyboard can be typed directly (as in \enquote{$1 + 1 = 2$} above).
Other symbols are obtained by giving commands (such as \enquote{\code{\textbackslash{}sum}} in the display example).
There are many thousands of symbols available to you in \LaTeX{}, so we won't cover them all here, but the ones in \cref{tab:comsymb} should be enough to get you started.
(Down the road, if you need to find out how to type a particular symbol in \LaTeX{}, the \href{http://detexify.kirelabs.org/classify.html}{De\TeX{}ify} symbol recognizer is a great place to start.)

\begin{table}[htb]
  \centering
  \begin{tabular}[htb]{c c c c}
  \toprule
  Symbol & Code & Symbol & Code \\ \midrule
  $\displaystyle\int_{a}^{b}$ & \code{\textbackslash{}int\_{a}\textasciicircum{}{b}} & $\displaystyle\sum_{n = a}^{b}$ & \code{\textbackslash{}sum\_{n = a}\textasciicircum{}{b}} \\
  $\displaystyle\prod_{n = a}^{b}$ & \code{\textbackslash{}prod\_{n = a}\textasciicircum{}{b}} & $\displaystyle\coprod_{n = a}^{b}$ & \code{\textbackslash{}coprod\_{n = a}\textasciicircum{}{b}} \\
  $\displaystyle \bigcup_{i = 1}^{4}$ & \code{\textbackslash{}bigcup\_\{i = 1\}\textasciicircum{}\{4\}} & $\displaystyle \bigcap_{i = 1}^{4}$ & \code{\textbackslash{}bigcap\_\{i = 1\}\textasciicircum{}\{4\}}\\
  $\displaystyle\lim_{x \to a}$ & \code{\textbackslash{}lim\_\{x \textbackslash{}to a\}} & $\displaystyle\frac{a + b}{c + d}$ & \code{\textbackslash{}frac\{a + b\}\{c + d\}} \\
  $\displaystyle \sqrt{a + b}$ & \code{\textbackslash{}sqrt\{a+b\}} & $\displaystyle \binom{n}{k}$ & \code{\textbackslash{}binom\{n\}\{k\}}\\
  $x \equiv 4 \pmod a$ & \code{x \textbackslash{}equiv 4 \textbackslash{}pmod a} & $x \bmod a$ & \code{x \textbackslash{}bmod a} \\
  $\sin, \cos, \tan, \ln, \exp$ & \code{\textbackslash{}sin}, \code{\textbackslash{}cos}, \code{\textbackslash{}tan}, \code{\textbackslash{}ln}, \code{\textbackslash{}exp} & $\leq, \geq$ & \code{\textbackslash{}leq}, \code{\textbackslash{}geq} \\
  $+, -, \pm, \times, \div, /$ & \code{+}, \code{-}, \code{\textbackslash{}pm}, \code{\textbackslash{}times}, \code{\textbackslash{}div}, \code{/} & $\forall, \exists, \in, \notin$ & \code{\textbackslash{}forall}, \code{\textbackslash{}exists}, \code{\textbackslash{}in}, \code{\textbackslash{}notin} \\
  $=, \approx, \equiv$ & \code{=}, \code{\textbackslash{}approx}, \code{\textbackslash{}equiv} & $\neq, \not \approx, \not \equiv$ & \code{\textbackslash{}neq}, \code{\textbackslash{}not \textbackslash{}approx}, \code{\textbackslash{}not \textbackslash{}equiv} \\
  $\subset, \subseteq, \subsetneq$ & \code{\textbackslash{}subset}, \code{\textbackslash{}subseteq}, \code{\textbackslash{}subsetneq} & $\supset, \supseteq, \supsetneq$ & \code{\textbackslash{}supset}, \code{\textbackslash{}supseteq}, \code{\textbackslash{}supsetneq} \\
  $\partial x, \mathrm{d} x$ & \code{\textbackslash{}partial x}, \code{\textbackslash{}mathrm\{d\} x} & $\hat{x}, \bar{x}, \dot{x}, x'$ & \code{\textbackslash{}hat\{x\}}, \code{\textbackslash{}bar\{x\}}, \code{\textbackslash{}dot\{x\}}, \code{x'} \\
  $\circ, \oplus, \otimes, \cdot$ & \code{\textbackslash{}circ}, \code{\textbackslash{}oplus}, \code{\textbackslash{}otimes}, \code{\textbackslash{}cdot} & $\cup, \cap$ & \code{\textbackslash{}cup}, \code{\textbackslash{}cap} \\
  $(, [, \{, \lvert$ & \code{(}, \code{[}, \code{\textbackslash{}\{}, \code{\textbackslash{}lvert} & $), ], \}, \rvert$ & \code{)}, \code{]}, \code{\textbackslash{}\}}, \code{\textbackslash{}rvert} \\
  $\alpha, \beta, \pi, \dots$ & \code{\textbackslash{}alpha}, \code{\textbackslash{}beta}, \code{\textbackslash{}pi}, \dots & $x^{n}, x_{n}$ & \code{x\textasciicircum{}\{n\}}, \code{x\_\{n\}} \\
  $\overline{z^{2} - 1}$ & \code{\textbackslash{}overline\{z\textasciicircum{}\{2\} - 1\}} & $\{ x \mid y \}$ & \code{\textbackslash{}\{ x \textbackslash{}mid y \textbackslash{}\}} \\
  $\mathbf{R}, \mathbb{R}$ & \code{\textbackslash{}mathbf\{R\}}, \code{\textbackslash{}mathbb\{R\}} & $\mathfrak{R}, \mathcal{R}$ & \code{\textbackslash{}mathfrak\{R\}}, \code{\textbackslash{}mathcal\{R\}} \\
  $\infty$ & \code{\textbackslash{}infty} & $\dots$ & \code{\textbackslash{}dots} (automatic height) \\
  $\vdots, \ddots$ & \code{\textbackslash{}vdots}, \code{\textbackslash{}ddots} & $\cdots, \ldots$ & \code{\textbackslash{}cdots}, \code{\textbackslash{}ldots} (manual height) \\
 \bottomrule
\end{tabular}
\caption{Collection of common \LaTeX{} math symbols and commands}
\label{tab:comsymb}
\end{table}

\subsection*{Delimiter sizes}
The bracket delimiters ($\{$, $]$, and the like) do not automatically resize by default.
Thus, you can easily accidentally make a mess, like this:
\begin{equation}
  \label{eq:brackexbad}
  F [ \sum_{j \geq 0}^{5} x^{j} ]
\end{equation}
Notice that the brackets around the sum are much too small.

To fix this, you can tell \LaTeX{} to automatically resize these brackets.
Use the \code{\textbackslash{}left} and \code{\textbackslash{}right} commands to do this.
For example, if we rewrite \cref{eq:brackexbad} using these:
\begin{verbatim}
\begin{equation}
  F \left[ \sum_{j = 0}^{5} x^{j} \right]
\end{equation}
\end{verbatim}
then we obtain this (much nicer!) output:
\begin{equation}
  \label{eq:brackexgood}
  F \left[ \sum_{j \geq 0}^{5} x^{j} \right]
\end{equation}

You can also manually specify the size of delimiters if the automatic sizing doesn't work correctly, using the commands \code{\textbackslash{}big}, \code{\textbackslash{}Big}, \code{\textbackslash{}bigg}, and \code{\textbackslash{}Bigg} (in increasing order of bigness) in place of \code{\textbackslash{}left} and \code{\textbackslash{}right}.

Additionally, you can use the \emph{empty delimiter} \enquote{\code{.}} if you want to make a one-sided delimiter scale to the size of its argument.
For example, the following code produces a nice-looking evaluation for a definite integral:
\begin{verbatim}
\begin{equation}
  \left. \frac{x^{2} - 4}{x - 3} \right\rvert_{1}^{3}
\end{equation}
\end{verbatim}
The resulting output looks like this:
\begin{equation}
  \label{eq:evalex}
  \left. \frac{x^{2} - 4}{x - 3} \right\rvert_{1}^{3}
\end{equation}

\section{Exercises}
\begin{enumerate}
\item
  Typeset the following sentence.
  \begin{quote}
    It is clear that $\left\lvert x \right\rvert \leq 1$.
  \end{quote}

\item
  Typeset the following sentence.
  \begin{quote}
    Euler famously showed that $e^{i \theta} = \cos \theta + i \sin \theta$.
  \end{quote}

\item
  Typeset the following in display mode.
  \begin{equation*}
    \int_{-\infty}^{+\infty} e^{-x^{2}} \mathrm{d}x = \sqrt{\pi}
  \end{equation*}

\item
  Typeset the following in display mode.
  \begin{equation*}
    E \left[ E \left[ X \mid Y \right] \right] =
    \sum_{y} \left( \sum_{x} x P \left( X = x \mid Y = y \right) \right) P \left( Y = y \right)
  \end{equation*}
\end{enumerate}

\section{Advanced math modes}
There are many different modes for typesetting display math in \LaTeX{}.
These include techniques for setting multi-line equations, for marking up equations, for setting arrays and matrices, for multi-line subscripts, and more.

\subsection{Multi-line equations}
From time to time, you may want to set a multi-line equation like \cref{eq:gcidef} above.
This can be done using several different environments, depending on your goals:
\begin{table}[htb]
  \centering
  \begin{tabular}{c c}
    \toprule
    Environment & Application \\ \midrule
    \code{align} and \code{align*} & aligning elements in several lines \\
    \code{multline} and \code{multline*} & a single long expression split onto several lines \\
    \code{gather} and \code{gather*} & several expressions, each centered vertically \\
    \bottomrule
  \end{tabular}
  \caption{Types of multi-line equations}
  \label{tab:multiline}
\end{table}

To produce aligned elements using the \code{align*} environment, you should write code like this:
\begin{verbatim}
\begin{align*}
  (1 + x)^{n} &= 1 + n x + \binom{n}{2} x^{2} + \binom{n}{3} x^{3} + \dots \\
  &= \sum_{k = 0}^{n} \binom{n}{k} x^{k}
\end{align*}
\end{verbatim}
The resulting output will look like this:
\begin{align*}
  (1 + x)^{n} &= 1 + n x + \binom{n}{2} x^{2} + \binom{n}{3} x^{3} + \dots \\
  &= \sum_{k = 0}^{n} \binom{n}{k} x^{k}
\end{align*}

There are two key elements here.
The first is the \emph{alignment tab} \code{\&}, which tells \LaTeX{} where to align the lines.
There should be exactly one of these per line.
The second is the \emph{line break} \code{\textbackslash{}\textbackslash{}}, which tells \LaTeX{} where to start a new line.
There should be exactly one of these per line, except for the last line.

\code{multline} and \code{gather} are similar, so we won't give a code sample here.
Since these environments don't have alignment, they don't use \code{\&}; just include line breaks as appropriate.
\code{multline} will set the first line to the left, the last line to the right, and center all the other lines; \code{gather} will center all lines.

\subsection{Marking up equations}
\LaTeX{} provides several features for marking up equations in fancy ways.
For example, it can produce the brace notation for piecewise functions, using the \code{cases} environment.
The following code typesets the definition of Thomae's function, which is discontinuous on $\mathbf{Q}$ but continuous on $\mathbf{R} \backslash \mathbf{Q}$ (yikes!):
\begin{verbatim}
\begin{equation*}
  T (x) =
  \begin{cases}
    \frac{1}{q}, & x \in \mathbf{Q} \text{ and $x = \frac{p}{q}$ in lowest terms}; \\
    0, & \text{otherwise}.
  \end{cases}
\end{equation*}
\end{verbatim}
The output resulting from this code looks like this:
\begin{equation*}
  T (x) =
  \begin{cases}
    \frac{1}{q}, & x \in \mathbf{Q} \text{ and $x = \frac{p}{q}$ in lowest terms}; \\
    0, & \text{otherwise}.
  \end{cases}
\end{equation*}
Note the use of the \code{\textbackslash{}text\{\}} command to tell \LaTeX{} to typeset certain things in text mode inside the display environment.
Without this tweak, we end up with a disaster:
\begin{equation*}
  T (x) =
  \begin{cases}
    \frac{1}{q}, & x \in \mathbf{Q} and x = \frac{p}{q} in lowest terms; \\
    0, & otherwise.
  \end{cases}
\end{equation*}
\emph{Don't do this!}
It is very bad!

\LaTeX{} can also put braces under parts of an expression, which can be useful for explaining a calculation.
For example, we can indicate $n$-fold addition using an underbrace with the following code:
\begin{verbatim}
\begin{equation*}
  nx = \underbrace{x + x + \dots + x}_{\text{$n$ times}}
\end{equation*}
\end{verbatim}
The resulting output looks like this:
\begin{equation*}
  nx = \underbrace{x + x + \dots + x}_{\text{$n$ times}}
\end{equation*}

\LaTeX{} can also provide multi-line subscripts, as seen in \cref{eq:gcidefperm,eq:gcidefpart}, using the \code{\textbackslash{}substack} command.
For example, we can indicate a two-index summation using the following code:
\begin{verbatim}
\begin{equation*}
  \sum_{\substack{i \geq 0 \\ j \geq 0}} x^{i} y^{j}
\end{equation*}
\end{verbatim}
The resulting output looks like this:
\begin{equation*}
  \sum_{\substack{i \geq 0 \\ j \geq 0}} x^{i} y^{j}
\end{equation*}
Note the use of the line break inside the \code{\textbackslash{}substack} to tell \LaTeX{} where to go to the next line.

\subsection{Arrays and matrices}
\LaTeX{} can also handle matrix and array typesetting.
The core of this functionality is the \code{matrix} environment, which aligns the entries of a matrix using the alignment tab \code{\&} and line break \code{\textbackslash{}\textbackslash{}}.
This is extended by several other commands, which put size-appropriate brackets around matrices.
In particular, \code{pmatrix} gives a matrix surrounded by parenthesis, \code{bmatrix} a matrix surrounded by square brackets, \code{Bmatrix} a matrix surrounded by curly braces, \code{vmatrix} a matrix surrounded by vertical bars, and \code{Vmatrix} a matrix surrounded by double vertical bars.

For example, we can define the standard matrix entry notation using the following code:
\begin{verbatim}
\begin{equation*}
  A_{m,n} =
  \begin{bmatrix}
    a_{1,1} & a_{1,2} & \cdots & a_{1,n} \\
    a_{2,1} & a_{2,2} & \cdots & a_{2,n} \\
    \vdots  & \vdots  & \ddots & \vdots  \\
    a_{m,1} & a_{m,2} & \cdots & a_{m,n}
  \end{bmatrix}
\end{equation*}
\end{verbatim}
The resulting output looks like this:
\begin{equation*}
  A_{m,n} =
  \begin{bmatrix}
    a_{1,1} & a_{1,2} & \cdots & a_{1,n} \\
    a_{2,1} & a_{2,2} & \cdots & a_{2,n} \\
    \vdots  & \vdots  & \ddots & \vdots  \\
    a_{m,1} & a_{m,2} & \cdots & a_{m,n}
  \end{bmatrix}
\end{equation*}
Note the use of \code{\&} and \code{\textbackslash{}\textbackslash{}} to get all the entries in the right place.

There are also starred variants of the \code{matrix} environments which allow you to specify columns manually.
With this added power, you can change the alignment of entries and add vertical and horizontal separators.
\end{document}
